-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")

-- Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
local player = Players.LocalPlayer
local mouse = player:GetMouse()
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CameraTeleportUI"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙˆÙ„ÙŠ "Azooz script"
local welcomeLabel = Instance.new("TextLabel")
welcomeLabel.Name = "WelcomeLabel"
welcomeLabel.Size = UDim2.new(1, 0, 1, 0)
welcomeLabel.Position = UDim2.new(0, 0, 0, 0)
welcomeLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
welcomeLabel.BackgroundTransparency = 0.3
welcomeLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
welcomeLabel.Text = "Azooz script"
welcomeLabel.Font = Enum.Font.GothamBold
welcomeLabel.TextSize = 36
welcomeLabel.TextStrokeTransparency = 0
welcomeLabel.TextStrokeColor3 = Color3.fromRGB(0, 150, 255)
welcomeLabel.Visible = true
welcomeLabel.ZIndex = 100
welcomeLabel.Parent = screenGui

-- Ø§Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ù…ØªØ­Ø±Ùƒ (Ù…Ø®ÙÙŠ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©)
local mainButton = Instance.new("TextButton")
mainButton.Name = "MainButton"
mainButton.Size = UDim2.new(0, 60, 0, 60)
mainButton.Position = UDim2.new(0.5, -30, 0.1, 0)
mainButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
mainButton.TextColor3 = Color3.fromRGB(255, 255, 255)
mainButton.Text = "ğŸ¯"
mainButton.Font = Enum.Font.GothamBold
mainButton.TextSize = 28
mainButton.BorderSizePixel = 0
mainButton.Visible = false
mainButton.ZIndex = 10
mainButton.Parent = screenGui

-- Ø¥Ø·Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ù…Ø®ÙÙŠ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0.85, 0, 0.7, 0)
mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
mainFrame.BackgroundTransparency = 0.1
mainFrame.BorderSizePixel = 0
mainFrame.Visible = false
mainFrame.ZIndex = 5
mainFrame.Parent = screenGui

-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 50)
titleBar.Position = UDim2.new(0, 0, 0, 0)
titleBar.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
titleBar.BackgroundTransparency = 0.5
titleBar.BorderSizePixel = 0
titleBar.ZIndex = 6
titleBar.Parent = mainFrame

-- Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 40, 0, 40)
closeButton.Position = UDim2.new(1, -45, 0, 5)
closeButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.Text = "Ã—"
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 32
closeButton.BorderSizePixel = 0
closeButton.ZIndex = 7
closeButton.Parent = titleBar

-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "TitleLabel"
titleLabel.Size = UDim2.new(1, -50, 1, 0)
titleLabel.Position = UDim2.new(0, 10, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.Text = "Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„Ø³Ø±ÙŠØ¹"
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextSize = 24
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.ZIndex = 7
titleLabel.Parent = titleBar

-- ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
local instructionLabel = Instance.new("TextLabel")
instructionLabel.Name = "InstructionLabel"
instructionLabel.Size = UDim2.new(1, -20, 0, 60)
instructionLabel.Position = UDim2.new(0, 10, 0, 60)
instructionLabel.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
instructionLabel.BackgroundTransparency = 0.3
instructionLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
instructionLabel.Text = "ğŸ“Œ Ø¶Ø¹ Ø§Ù„Ù…Ø¤Ø´Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨\nØ«Ù… Ø§Ø¶ØºØ· Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„ÙÙˆØ±ÙŠ"
instructionLabel.Font = Enum.Font.Gotham
instructionLabel.TextSize = 18
instructionLabel.TextXAlignment = Enum.TextXAlignment.Center
instructionLabel.TextWrapped = true
instructionLabel.ZIndex = 6
instructionLabel.Parent = mainFrame

-- Ø²Ø± ØªØ´ØºÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
local cameraModeButton = Instance.new("TextButton")
cameraModeButton.Name = "CameraModeButton"
cameraModeButton.Size = UDim2.new(1, -20, 0, 60)
cameraModeButton.Position = UDim2.new(0, 10, 0, 130)
cameraModeButton.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
cameraModeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
cameraModeButton.Text = "ğŸ” ØªØ´ØºÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø¬ÙˆÙŠØ©"
cameraModeButton.Font = Enum.Font.GothamBold
cameraModeButton.TextSize = 20
cameraModeButton.BorderSizePixel = 0
cameraModeButton.ZIndex = 6
cameraModeButton.Parent = mainFrame

-- Ø­Ø§Ù„Ø© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
local cameraStatus = Instance.new("TextLabel")
cameraStatus.Name = "CameraStatus"
cameraStatus.Size = UDim2.new(1, -20, 0, 40)
cameraStatus.Position = UDim2.new(0, 10, 0, 200)
cameraStatus.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
cameraStatus.BackgroundTransparency = 0.5
cameraStatus.TextColor3 = Color3.fromRGB(200, 200, 200)
cameraStatus.Text = "â¸ï¸ ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§: ØºÙŠØ± Ù†Ø´Ø·"
cameraStatus.Font = Enum.Font.Gotham
cameraStatus.TextSize = 18
cameraStatus.TextXAlignment = Enum.TextXAlignment.Center
cameraStatus.ZIndex = 6
cameraStatus.Parent = mainFrame

-- Ù…Ø¤Ø´Ø± Ø§Ù„Ù‡Ø¯Ù
local targetIndicator = Instance.new("Part")
targetIndicator.Name = "TargetIndicator"
targetIndicator.Size = Vector3.new(2, 0.2, 2)
targetIndicator.Anchored = true
targetIndicator.CanCollide = false
targetIndicator.Material = EnumMaterial.Neon
targetIndicator.Color = Color3.fromRGB(0, 255, 0)
targetIndicator.Transparency = 0.7
targetIndicator.Parent = Workspace

-- Ù…Ø¤Ø´Ø± Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠ
local circleIndicator = Instance.new("Part")
circleIndicator.Name = "CircleIndicator"
circleIndicator.Shape = Enum.PartType.Cylinder
circleIndicator.Size = Vector3.new(0.2, 5, 5)
circleIndicator.Anchored = true
circleIndicator.CanCollide = false
circleIndicator.Material = EnumMaterial.Neon
circleIndicator.Color = Color3.fromRGB(255, 255, 0)
circleIndicator.Transparency = 0.5
circleIndicator.Parent = Workspace

-- Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠØ© ÙˆØ§Ù„Ø¸Ù„Ø§Ù„
local function addVisualEffects()
	-- Ø²ÙˆØ§ÙŠØ§ Ø¯Ø§Ø¦Ø±ÙŠØ© Ù„Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
	local buttonCorner = Instance.new("UICorner")
	buttonCorner.CornerRadius = UDim.new(1, 0)
	buttonCorner.Parent = mainButton
	
	-- Ø¸Ù„ Ù„Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
	local buttonStroke = Instance.new("UIStroke")
	buttonStroke.Color = Color3.fromRGB(0, 150, 255)
	buttonStroke.Thickness = 3
	buttonStroke.Parent = mainButton
	
	-- Ø²ÙˆØ§ÙŠØ§ Ù„Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
	local frameCorner = Instance.new("UICorner")
	frameCorner.CornerRadius = UDim.new(0, 15)
	frameCorner.Parent = mainFrame
	
	-- Ø¸Ù„ Ù„Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
	local frameStroke = Instance.new("UIStroke")
	frameStroke.Color = Color3.fromRGB(0, 150, 255)
	frameStroke.Thickness = 2
	frameStroke.Parent = mainFrame
	
	-- Ø²ÙˆØ§ÙŠØ§ Ù„Ø¹Ù†Ø§ØµØ± Ø£Ø®Ø±Ù‰
	local cornerElements = {instructionLabel, cameraModeButton, cameraStatus}
	for _, element in ipairs(cornerElements) do
		local corner = Instance.new("UICorner")
		corner.CornerRadius = UDim.new(0, 10)
		corner.Parent = element
	end
	
	-- Ø²ÙˆØ§ÙŠØ§ Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
	local titleCorner = Instance.new("UICorner")
	titleCorner.CornerRadius = UDim.new(0, 15, 0, 0)
	titleCorner.Parent = titleBar
	
	-- Ø²ÙˆØ§ÙŠØ§ Ø¯Ø§Ø¦Ø±ÙŠØ© Ù„Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
	local closeCorner = Instance.new("UICorner")
	closeCorner.CornerRadius = UDim.new(1, 0)
	closeCorner.Parent = closeButton
end

-- Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø²Ø±
local function makeButtonDraggable(button)
	local dragging = false
	local dragInput, dragStart, startPos
	
	local function update(input)
		local delta = input.Position - dragStart
		local newX = startPos.X.Offset + delta.X
		local newY = startPos.Y.Offset + delta.Y
		
		local viewportSize = workspace.CurrentCamera.ViewportSize
		newX = math.clamp(newX, 0, viewportSize.X - button.AbsoluteSize.X)
		newY = math.clamp(newY, 0, viewportSize.Y - button.AbsoluteSize.Y)
		
		button.Position = UDim2.new(0, newX, 0, newY)
	end
	
	button.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = button.Position
			
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)
	
	button.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement then
			dragInput = input
		end
	end)
	
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input == dragInput then
			update(input)
		end
	end)
end

-- Ø¯Ø§Ù„Ø© Ù„ØªØºÙŠÙŠØ± Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø²ÙˆØ§ÙŠØ§
local function startColorAnimation()
	local colors = {
		Color3.fromRGB(255, 0, 0),    -- Ø£Ø­Ù…Ø±
		Color3.fromRGB(0, 255, 0),    -- Ø£Ø®Ø¶Ø±
		Color3.fromRGB(0, 0, 255),    -- Ø£Ø²Ø±Ù‚
		Color3.fromRGB(255, 255, 0),  -- Ø£ØµÙØ±
		Color3.fromRGB(255, 0, 255),  -- Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠ
		Color3.fromRGB(0, 255, 255)   -- Ø³Ù…Ø§ÙˆÙŠ
	}
	
	local elements = {mainFrame, mainButton, cameraModeButton}
	local strokes = {}
	
	for _, element in ipairs(elements) do
		local stroke = element:FindFirstChild("UIStroke")
		if stroke then
			table.insert(strokes, stroke)
		end
	end
	
	local currentIndex = 1
	
	while true do
		local color = colors[currentIndex]
		
		for _, stroke in ipairs(strokes) do
			TweenService:Create(stroke, TweenInfo.new(0.5), {
				Color = color
			}):Play()
		end
		
		-- ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
		TweenService:Create(mainButton, TweenInfo.new(0.5), {
			BackgroundColor3 = Color3.fromRGB(color.R * 50, color.G * 50, color.B * 50)
		}):Play()
		
		-- ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ù…Ø¤Ø´Ø± Ø§Ù„Ù‡Ø¯Ù
		targetIndicator.Color = color
		circleIndicator.Color = Color3.fromRGB(color.R * 255, color.G * 255, color.B * 255)
		
		currentIndex = currentIndex % #colors + 1
		wait(1)
	end
end

-- Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
local cameraActive = false
local originalCameraType = Enum.CameraType.Custom
local originalCFrame = nil
local cameraSubject = nil

-- Ø¯Ø§Ù„Ø© Ù„ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø¬ÙˆÙŠØ©
local function activateAerialCamera()
	if cameraActive then return end
	
	cameraActive = true
	local camera = Workspace.CurrentCamera
	
	-- Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©
	originalCameraType = camera.CameraType
	originalCFrame = camera.CFrame
	cameraSubject = camera.CameraSubject
	
	-- ØªØºÙŠÙŠØ± ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
	camera.CameraType = Enum.CameraType.Scriptable
	
	-- Ø±ÙØ¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„Ù„Ø£Ø¹Ù„Ù‰ ÙˆØ§Ù„Ù†Ø¸Ø± Ù„Ù„Ø£Ø³ÙÙ„
	local character = player.Character
	if character then
		local rootPart = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Head")
		if rootPart then
			local position = rootPart.Position + Vector3.new(0, 50, 0) -- 50 ÙˆØ­Ø¯Ø© ÙÙˆÙ‚
			local lookAt = rootPart.Position
			
			camera.CFrame = CFrame.new(position, lookAt)
			
			-- ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
			cameraStatus.Text = "âœ… ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§: Ù†Ø´Ø·\nğŸ‘† Ø­Ø±Ùƒ Ø§Ù„Ù…Ø§ÙˆØ³ Ù„Ù„ØªØ­ÙƒÙ… - ğŸ–±ï¸ Ø§Ø¶ØºØ· Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„"
			cameraStatus.TextColor3 = Color3.fromRGB(0, 255, 0)
			
			cameraModeButton.Text = "â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø¬ÙˆÙŠØ©"
			cameraModeButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
			
			-- Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„Ù‡Ø¯Ù
			targetIndicator.Transparency = 0.3
			circleIndicator.Transparency = 0.3
		end
	end
end

-- Ø¯Ø§Ù„Ø© Ù„Ø¥Ù„ØºØ§Ø¡ ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø¬ÙˆÙŠØ©
local function deactivateAerialCamera()
	if not cameraActive then return end
	
	cameraActive = false
	local camera = Workspace.CurrentCamera
	
	-- Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©
	camera.CameraType = originalCameraType
	if cameraSubject then
		camera.CameraSubject = cameraSubject
	end
	
	-- ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
	cameraStatus.Text = "â¸ï¸ ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§: ØºÙŠØ± Ù†Ø´Ø·"
	cameraStatus.TextColor3 = Color3.fromRGB(200, 200, 200)
	
	cameraModeButton.Text = "ğŸ” ØªØ´ØºÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø¬ÙˆÙŠØ©"
	cameraModeButton.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
	
	-- Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„Ù‡Ø¯Ù
	targetIndicator.Transparency = 0.7
	circleIndicator.Transparency = 0.7
end

-- Ø¯Ø§Ù„Ø© Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù‡Ø¯Ù
local function teleportToTarget()
	if not cameraActive then return end
	
	local targetPos = targetIndicator.Position
	local character = player.Character
	
	if character then
		local humanoid = character:FindFirstChild("Humanoid")
		local rootPart = character:FindFirstChild("HumanoidRootPart")
		
		if humanoid and rootPart then
			-- Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù
			rootPart.CFrame = CFrame.new(targetPos + Vector3.new(0, 5, 0))
			
			-- ØªØ£Ø«ÙŠØ± Ù…Ø±Ø¦ÙŠ Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„
			local teleportEffect = Instance.new("Part")
			teleportEffect.Size = Vector3.new(5, 5, 5)
			telepretEffect.Position = targetPos
			teleportEffect.Anchored = true
			teleportEffect.CanCollide = false
			teleportEffect.Material = EnumMaterial.Neon
			teleportEffect.Color = Color3.fromRGB(0, 255, 255)
			teleportEffect.Transparency = 0.3
			teleportEffect.Parent = Workspace
			
			-- Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ£Ø«ÙŠØ± Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØ©
			game:GetService("Debris"):AddItem(teleportEffect, 1)
			
			-- Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
			deactivateAerialCamera()
			
			TweenService:Create(mainFrame, TweenInfo.new(0.3), {
				BackgroundTransparency = 1
			}):Play()
			
			wait(0.3)
			mainFrame.Visible = false
			mainFrame.BackgroundTransparency = 0.1
		end
	end
end

-- Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ù…Ø¤Ø´Ø± Ø§Ù„Ù‡Ø¯Ù
local function updateTargetIndicator()
	while true do
		if cameraActive then
			local mousePos = mouse.Hit.Position
			
			-- ØªØ­Ø¯ÙŠØ« Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø¤Ø´Ø±
			targetIndicator.Position = mousePos
			circleIndicator.Position = mousePos + Vector3.new(0, 0.1, 0)
			circleIndicator.Orientation = Vector3.new(0, 0, 90)
			
			-- ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ù…Ø¤Ø´Ø± Ø¹Ù†Ø¯ Ø§Ù„ØªØ£Ø´ÙŠØ± Ø¹Ù„Ù‰ Ù…ÙƒØ§Ù† ØµØ§Ù„Ø­
			local ray = Ray.new(mousePos + Vector3.new(0, 100, 0), Vector3.new(0, -200, 0))
			local hitPart, hitPosition = Workspace:FindPartOnRay(ray, player.Character)
			
			if hitPart then
				targetIndicator.Color = Color3.fromRGB(0, 255, 0) -- Ø£Ø®Ø¶Ø±
				circleIndicator.Color = Color3.fromRGB(0, 255, 0)
			else
				targetIndicator.Color = Color3.fromRGB(255, 0, 0) -- Ø£Ø­Ù…Ø±
				circleIndicator.Color = Color3.fromRGB(255, 0, 0)
			end
		end
		RunService.RenderStepped:Wait()
	end
end

-- Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
local function cameraControl()
	local camera = Workspace.CurrentCamera
	local lastMousePos = nil
	
	UserInputService.InputChanged:Connect(function(input)
		if cameraActive and input.UserInputType == Enum.UserInputType.MouseMovement then
			local currentMousePos = input.Position
			
			if lastMousePos then
				local delta = currentMousePos - lastMousePos
				
				-- ØªØ­Ø±ÙŠÙƒ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø§ÙˆØ³
				local currentCF = camera.CFrame
				local rightVector = currentCF.RightVector
				local upVector = currentCF.UpVector
				
				-- ØªØ­Ø±ÙŠÙƒ Ø£ÙÙ‚ÙŠ ÙˆØ¹Ù…ÙˆØ¯ÙŠ
				local moveRight = -delta.X * 0.5
				local moveForward = delta.Y * 0.5
				
				local newPosition = currentCF.Position + 
					(rightVector * moveRight) + 
					(upVector * moveForward)
				
				-- Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø± Ù„Ù„Ø£Ø³ÙÙ„
				local lookPosition = newPosition - Vector3.new(0, 30, 0)
				camera.CFrame = CFrame.new(newPosition, lookPosition)
			end
			
			lastMousePos = currentMousePos
		end
	end)
	
	-- Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† lastMousePos Ø¹Ù†Ø¯ ØªØ±Ùƒ Ø§Ù„Ù…Ø§ÙˆØ³
	UserInputService.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement then
			lastMousePos = nil
		end
	end)
end

-- ØªÙƒÙŠÙŠÙ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù…Ø¹ Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©
local function adaptToScreenSize()
	local viewportSize = Workspace.CurrentCamera.ViewportSize
	
	if viewportSize.Y > viewportSize.X then
		-- Ø¬ÙˆØ§Ù„
		mainFrame.Size = UDim2.new(0.9, 0, 0.75, 0)
	else
		-- ÙƒÙ…Ø¨ÙŠÙˆØªØ±
		mainFrame.Size = UDim2.new(0.7, 0, 0.65, 0)
	end
end

-- Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
addVisualEffects()
makeButtonDraggable(mainButton)

-- Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ÙŠØ© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
wait(5)
TweenService:Create(welcomeLabel, TweenInfo.new(1), {
	BackgroundTransparency = 1,
	TextTransparency = 1,
	TextStrokeTransparency = 1
}):Play()

wait(1)
welcomeLabel:Destroy()

-- Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
mainButton.Visible = true
TweenService:Create(mainButton, TweenInfo.new(0.5), {
	BackgroundTransparency = 0,
	TextTransparency = 0
}):Play()

-- ØªÙƒÙŠÙŠÙ Ù…Ø¹ Ø­Ø¬Ù… Ø§Ù„Ø´Ø§Ø´Ø©
adaptToScreenSize()
Workspace.CurrentCamera:GetPropertyChangedSignal("ViewportSize"):Connect(adaptToScreenSize)

-- ØªØ´ØºÙŠÙ„ Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø£Ù„ÙˆØ§Ù†
coroutine.wrap(startColorAnimation)()

-- ØªØ´ØºÙŠÙ„ ØªØ­Ø¯ÙŠØ« Ù…Ø¤Ø´Ø± Ø§Ù„Ù‡Ø¯Ù
coroutine.wrap(updateTargetIndicator)()

-- ØªØ´ØºÙŠÙ„ ØªØ­ÙƒÙ… Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
coroutine.wrap(cameraControl)()

-- Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
mainButton.MouseButton1Click:Connect(function()
	mainFrame.Visible = not mainFrame.Visible
	
	if mainFrame.Visible then
		mainFrame.BackgroundTransparency = 1
		TweenService:Create(mainFrame, TweenInfo.new(0.3), {
			BackgroundTransparency = 0.1
		}):Play()
	end
end)

closeButton.MouseButton1Click:Connect(function()
	TweenService:Create(mainFrame, TweenInfo.new(0.3), {
		BackgroundTransparency = 1
	}):Play()
	
	wait(0.3)
	mainFrame.Visible = false
	mainFrame.BackgroundTransparency = 0.1
	deactivateAerialCamera()
end)

cameraModeButton.MouseButton1Click:Connect(function()
	if cameraActive then
		deactivateAerialCamera()
	else
		activateAerialCamera()
	end
end)

-- Ø­Ø¯Ø« Ø§Ù„Ù†Ù‚Ø± Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„
mouse.Button1Down:Connect(function()
	if cameraActive then
		teleportToTarget()
	end
end)

-- Ø­Ø¯Ø« Ø§Ù„Ù…Ø³ Ù„Ù„Ø¬ÙˆØ§Ù„
UserInputService.TouchTap:Connect(function(touchPos, gameProcessed)
	if cameraActive and not gameProcessed then
		teleportToTarget()
	end
end)

-- Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ù…ÙØªØ§Ø­ ESC
UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if input.KeyCode == Enum.KeyCode.Escape and not gameProcessed then
		if mainFrame.Visible then
			TweenService:Create(mainFrame, TweenInfo.new(0.3), {
				BackgroundTransparency = 1
			}):Play()
			
			wait(0.3)
			mainFrame.Visible = false
			mainFrame.BackgroundTransparency = 0.1
			deactivateAerialCamera()
		end
	end
end)

print("âœ… Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„Ø³Ø±ÙŠØ¹ Ø¬Ø§Ù‡Ø²!")
